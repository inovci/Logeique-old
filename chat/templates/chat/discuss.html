{% block content %}
{% include "chat/html_css/discuss_css.html" %}

<script src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>


{% block display %}
<div id="display">

  <!-- <div class="container darker">
    <b>Tom</b><p>Hello Everyone, How Are You Guys Doing?</p>
    <span class="time-left">20th, April 2021</span>
  </div> -->RENDER !!!

</div>
{% endblock display %}

<script>
  $(document).ready(function () {
    setInterval(function () {
      $.ajax({
        type: 'GET',
        url: "/chat/receive/{{room}}/",
        success: function (response) {
          console.log(response);
          $("#display").empty();
          for (var key in response.messages) {
            var temp = "<div class='container darker'><b> <p>" + response.messages[key].value + "</p><span class='time-left'>" + response.messages[key].date + "</span></div>";
            $("#display").append(temp);
          }
        },
        error: function (response) {

        }
      });
    }, 1000);
  })
</script>

<div>
  {% block form %}
  <form id="post-form" method="POST" action="{% url 'chat:send' user.id room.id %}">
    {% csrf_token %}
    <input type="text" name="message" id="message" />
    <input type="submit" value="Send" />
  </form>
  {% endblock form %}
</div>

<script type="text/javascript">
  document.getElementById("#post-form").addEventListener("submit", function (event) {
    event.preventDefault();
  }, false);
</script>

{% endblock %}
